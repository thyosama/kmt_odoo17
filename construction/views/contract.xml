<odoo>
    <record id="view_contract_tree" model="ir.ui.view">
        <field name="name">view_contract_tree</field>
        <field name="model">construction.contract</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" optional="show"/>
                <field name="project_id" optional="show"/>
                <field name="parner_id" optional="show"/>
                <field name="date" required="1" optional="show"/>
                <field name="recieve_date" optional="show"/>
                <field name="contract_id" optional="show"/>
                <field name="down_payment_value" optional="show"/>
                <field name="sub_contactor" optional="hide"/>
            </tree>
        </field>
    </record>
    <record id="view_contract_form" model="ir.ui.view">
        <field name="name">view_contract_form</field>
        <field name="model">construction.contract</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_confirm" string="Confim" states="draft" type="object" class="btn-primary"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,approve,quotation"/>
                </header>
                <h2>
                    <field name="name"/>
                </h2>
                <group>
                    <group>
                        <field name="type" invisible="1"/>
                        <field name="sub_contactor"
                               attrs="{'invisible':[('type','=','owner')],'required':[('type','=','supconstractor')]}"/>
                        <field name="project_id" required="1"/>
                        <field name="parner_id"/>
                        <field name="contract_id" required="1"/>
                        <field name="date" required="1"/>
                        <field name="recieve_date"/>
                    </group>
                    <group>
                        <field name="order_id" readonly="1"/>
                         <field name="account_id" string="Partner Account"/>
                        <field name="down_payment_prectenge"/>
                        <field name="down_payment_value"/>
                        <field name="revenue_account_id"/>
                        <field name="number_of_invoice"/>
                    </group>
                </group>
                <notebook>
                    <page string="Lines" attrs="{'invisible':[('type','=','supconstractor')]}">
                        <field name="lines_id">
                            <tree editable="bottom">
                                <field name="sub_type" invisible="1"/>


                                <field name="code" required="1"/>
                                <field name="item" required="1"/>
                                <field name="description" required="1"/>
                                <field name="uom_id" required="1"/>
                                <field name="qty" attrs="{'required':True,'readonly':[('sub_type','=','main')]}"
                                       sum="Total"/>
                                <field name="price_unit"
                                       attrs="{'required':True,'readonly':[('sub_type','=','main')]}"/>
                                <field name="discount" sum="Total"/>
                                <field name="total_value" sum="Total"/>
                                <field name="notes"/>

                            </tree>
                            <form>

                                <group>
                                    <field name="code" required="1"/>
                                    <field name="sub_type" invisible="1"/>

                                    <field name="item" required="1"/>
                                    <field name="description" required="1"/>
                                    <field name="uom_id" required="1"/>
                                    <field name="qty" attrs="{'required':True,'readonly':[('sub_type','=','main')]}"/>
                                    <field name="price_unit"
                                           attrs="{'required':True,'readonly':[('sub_type','=','main')]}"/>
                                    <field name="discount" attrs="{'readonly':[('sub_type','=','main')]}"/>
                                    <field name="total_value"/>
                                    <field name="notes"/>
                                </group>
                            </form>
                        </field>
                    </page>
                    <page string="Deduction" attrs="{'invisible':[('type','!=','owner')]}">
                        <field name="deduction_ids" context="{'default_type':'deduction','default_sub_type':'owner'}">
                            <tree editable="top">
                                <field name="type" invisible="1"/>
                                <field name="sub_type" invisible="1"/>
                                <field name="name" required="1"/>
                                <field name="account_id"/>
                                <field name="is_precentage"/>
                                <field name="precentage" attrs="{'readonly':[('is_precentage','=',False)]}"/>
                                <field name="is_down_payment" string="Value"/>
                            </tree>
                        </field>
                    </page>

                    <page string="Additional" attrs="{'invisible':[('type','!=','owner')]}">
                        <field name="allowance_ids" context="{'default_type':'addition','default_sub_type':'owner'}">
                            <tree editable="top">
                                <field name="type" invisible="1"/>
                                <field name="sub_type" invisible="1"/>
                                <field name="name" required="1"/>
                                <field name="account_id"/>
                                <field name="is_precentage"/>
                                <field name="precentage" attrs="{'readonly':[('is_precentage','=',False)]}"/>
                                <field name="is_down_payment" string="Value"/>

                            </tree>
                        </field>
                    </page>
                </notebook>

                <group class="oe_subtotal_footer oe_right">

                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                        <label for="total_value"/>
                    </div>
                    <field name="total_value" nolabel="1" class="oe_subtotal_footer_separator"
                           widget="monetary"/>

                </group>


            </form>
        </field>
    </record>
    <record id="view_contract_form_sub" model="ir.ui.view">
        <field name="name">view_contract_form</field>
        <field name="model">construction.contract</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_confirm" string="Confim" states="draft" type="object" class="btn-primary"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,approve,quotation"/>
                </header>
                <h2>
                    <field name="name"/>
                </h2>
                <group>
                    <group>
                        <field name="type" invisible="1"/>
                        <field name="sub_contactor"
                               attrs="{'invisible':[('type','=','owner')],'required':[('type','=','supconstractor')]}"/>
                        <field name="project_id" required="1"/>
                        <field name="parner_id"/>
                        <field name="contract_id" required="1"/>
                        <field name="date" required="1"/>
                        <field name="recieve_date"/>
                    </group>
                    <group>
                        <field name="order_id" readonly="1"/>
                        <field name="account_id" string="Partner Account"/>
                        <field name="down_payment_prectenge"/>
                        <field name="down_payment_value"/>
                        <field name="revenue_account_id"/>
                        <field name="number_of_invoice"/>
                    </group>
                </group>
                <notebook>
                    <page string="Lines" attrs="{'invisible':[('type','=','owner')]}">
                        <field name="sub_lines_id">
                            <tree editable="bottom">
                                <field name="tender_id" required="1"/>
                                <field name="sub_contarctor_item" required="1"/>
                                <field name="wbs_item" required="1"/>
                                <field name="qty" required="1" sum="Total"/>
                                <field name="price_unit" required="1"/>
                                <field name="total_value" required="1" sum="Total"/>
                            </tree>
                            <form>
                                <group>
                                    <field name="tender_id" required="1"/>
                                    <field name="sub_contarctor_item" required="1"/>
                                    <field name="wbs_item" required="1"/>
                                    <field name="qty" required="1" sum="Total"/>
                                    <field name="price_unit" required="1"/>
                                    <field name="total_value" required="1" sum="Total"/>
                                </group>
                            </form>
                        </field>
                    </page>
                    <page string="Deduction" attrs="{'invisible':[('type','=','owner')]}">
                        <field name="deduction_ids"
                               context="{'default_type':'deduction','default_sub_type':'supconstractor'}">
                            <tree editable="top">
                                <field name="type" invisible="1"/>
                                <field name="sub_type" invisible="1"/>
                                <field name="name" required="1"/>
                                <field name="account_id"/>
                                <field name="is_precentage"/>
                                <field name="precentage" attrs="{'readonly':[('is_precentage','=',False)]}"/>
                                <field name="is_down_payment" string="Value"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Additional" attrs="{'invisible':[('type','=','owner')]}">
                        <field name="allowance_ids"
                               context="{'default_type':'addition','default_sub_type':'supconstractor'}">
                            <tree editable="top">
                                <field name="type" invisible="1"/>
                                <field name="sub_type" invisible="1"/>
                                <field name="name" required="1"/>
                                <field name="account_id"/>
                                <field name="is_precentage"/>
                                <field name="precentage" attrs="{'readonly':[('is_precentage','=',False)]}"/>
                                <field name="is_down_payment" string="Value"/>

                            </tree>
                        </field>
                    </page>


                </notebook>

                <group class="oe_subtotal_footer oe_right">

                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                        <label for="total_value"/>
                    </div>
                    <field name="total_value" nolabel="1" class="oe_subtotal_footer_separator"
                           widget="monetary"/>

                </group>


            </form>
        </field>
    </record>


    <record id="view_contract_tree_line" model="ir.ui.view">
        <field name="name">view_contract_tree_line</field>
        <field name="model">construction.contract.line</field>
        <field name="arch" type="xml">
            <tree>

                <field name="tender_id" required="1"/>
                <field name="sub_contarctor_item" required="1"/>
                <field name="wbs_item" required="1"/>
                <field name="qty" required="1" sum="Total"/>
                <field name="price_unit" required="1"/>
                <field name="total_value" required="1" sum="Total"/>
            </tree>

        </field>
    </record>

</odoo>