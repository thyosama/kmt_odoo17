<odoo>
    <record id="construction_sale_order_form" model="ir.ui.view">
        <field name="name">construction_sale_order_form</field>
        <field name="model">construction.sale.order</field>
        <field name="arch" type="xml">
            <form>
                <header>

                    <button string="Confirm" name="action_confirm" states="draft" type="object"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm"/>
                </header>
                <sheet>
                    <h2>
                        <field name="name" readonly="1"/>
                    </h2>
                    <group>
                        <group>

                            <field name="partner_id"
                                   attrs="{'readonly':[('state','=','confirm')],'required':True}"/>
                            <field name="project_id" attrs="{'readonly':[('state','=','confirm')],
                                'required':True}"/>


                        </group>
                        <group>
                            <field name="created_date" attrs="{'readonly':[('state','=','confirm')]}"/>
                            <field name="discount_lines" attrs="{'readonly':[('state','=','confirm')]}"/>
                        </group>
                    </group>
                    <button string="Round" name="action_round"   type="object"/>
                    <notebook>
                        <page string="Lines">
                            <field name="order_lines" attrs="{'readonly':[('state','=','confirm')]}">
                                <tree editable="bottom" decoration-info="sub_type=='main'" decoration-bf="sub_type=='main'">
                                    <field name="type" invisible="1"/>
                                    <field name="sub_type" invisible="1"/>
                                    <field name="code" required="1"/>

                                    <field name="item" required="1"/>
                                    <field name="description" required="1"/>
                                    <field name="uom_id" required="1"/>
                                    <field name="qty"
                                           attrs="{'required':True,'readonly':[('type','=','main')]}"/>

                                    <field name="price_unit" attrs="{'required':True,'readonly':[('type','=','main')]}"/>
                                    <field name="discount" attrs="{'readonly':[('type','=','main')]}"/>
                                    <field name="total_value"/>
                                    <!--                                    <field name="parent_item" required="1"/>-->

                                    <field name="notes"/>

                                </tree>
                                <form>

                                    <group>
                                        <field name="code" required="1"/>

                                        <field name="item" required="1"/>
                                        <field name="type" invisible="1"/>
                                        <field name="description" required="1"/>
                                        <field name="uom_id" required="1"/>
                                        <field name="qty" attrs="{'required':True,'readonly':[('type','=','main')]}"/>

                                        <field name="price_unit"  attrs="{'required':True,'readonly':[('type','=','main')]}"/>
                                        <field name="discount"/>
                                        <field name="total_value"/>
                                        <!--                                    <field name="parent_item" required="1"/>-->

                                        <field name="notes"/>
                                    </group>
                                </form>
                            </field>
                        </page>
                    </notebook>
                    <group class="oe_subtotal_footer oe_right">
                        <field name="amount_before_dis"/>
                        <field name="total_discount"/>

                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="total"/>
                        </div>
                        <field name="total" nolabel="1" class="oe_subtotal_footer_separator"
                               widget="monetary"/>
                    </group>
                </sheet>
            </form>

        </field>
    </record>

    <record id="construction_sale_order_tree" model="ir.ui.view">
        <field name="name">construction_sale_order_tree</field>
        <field name="model">construction.sale.order</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="partner_id"/>
                <field name="project_id" required="1"/>
                <field name="created_date"/>
                <field name="total"/>
                <field name="state"/>
            </tree>
        </field>
    </record>
    /


</odoo>