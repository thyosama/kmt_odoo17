<?xml version="1.0"?>
<odoo>
    <record id="constaction_tender_tree" model="ir.ui.view">
        <field name="name">constaction_tender_tree</field>
        <field name="model">construction.tender</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <tree>
                <field name="code" required="1"/>
                <field name="parent_item"/>
                <field name="item" required="1"/>
                <field name="description" required="1"/>
                <field name="uom_id"/>
                <field name="qty"/>

                <field name="state" readonly="1"/>
                <field name="status" required="1"/>
                <field name="type" required="1"/>
<!--                <field name="price_unit"/>-->
<!--                <field name="total_value"/>-->

            </tree>
        </field>
    </record>
    <record id="view_project_form" model="ir.ui.view">
        <field name="name">constaction_project_form</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <!--        <field name="priority">1000</field>-->
        <field name="arch" type="xml">

            <xpath expr="//header/button[last()]" position="after">
                <button string="Create Break Down" name="create_job_ct" type="object"/>
                <button string="Create Financial Offer" name="create_quotation" type="object"/>

            </xpath>


            <xpath expr="//div[@name='button_box']" position="inside">
                <field name="is_quotation" invisible="1"/>

                <button string="View Financial Offer" name="view_quotation" type="object" icon="fa-file-text-o"
                        attrs="{'invisible':[('is_quotation','=',False)]}">
                    <!--                                 <field string="Quotations" name="quotation_count" widget="statinfo"/>-->
                </button>
                <button class="oe_stat_button" name="view_job_cost" type="object" icon="fa-tasks">
                    <field string="Break Down" name="job_cost_count" widget="statinfo"/>
                </button>
            </xpath>
            <xpath expr="//h1" position="after">
                <group>
                    <group>
                        <field name="name"/>
                        <field name="partner_id" required="1"/>


                    </group>
                    <group>
                        <field name="created_date"/>
                        <field name="consultant"/>
                        <field name="manager_id"/>
                        <field name="company_id" invisible="1"/>

                    </group>
                </group>
            </xpath>
            <xpath expr="//notebook/page[1]" position="before">
                <page string="Tender">
                    <field name="tender_ids">
                        <tree editable="bottom" decoration-info="type=='main'" decoration-bf="type=='main'">

                            <field name="code" required="1"/>
                            <field name="parent_item"/>
                            <field name="item" required="1"/>
                            <field name="description" required="1"/>
                            <field name="uom_id"/>
                            <field name="qty" attrs="{'readonly':[('type','=','main')],'required':True}"/>

                            <field name="state" readonly="1"/>
                            <field name="status" required="1"/>
                            <field name="type" required="1"/>
                            <field name="price_unit" readonly="1"/>
                            <field name="total_value"/>
                            <!--                                    <field name="parent_item" required="1"/>-->

                            <field name="notes"/>
                            <button type="object" string="Create Child" name="create_child_tender"
                                    attrs="{'invisible':[('type','!=','main')]}"/>


                        </tree>
                        <form>

                            <group>
                                <group>
                                    <field name="code" required="1"/>
                                    <field name="item" required="1"/>
                                    <field name="description" required="1"/>
                                    <field name="uom_id" required="1"/>
                                    <field name="state" readonly="1"/>
                                    <!--                                            <field name="price_unit"/>-->
                                    <!--                                            <field name="total_value"/>-->

                                </group>
                                <group>
                                    <field name="qty" required="1"/>
                                    <field name="type" required="1"/>
                                    <field name="status" required="1"/>
                                    <field name="notes"/>
                                </group>
                            </group>
                        </form>
                    </field>
                </page>
            </xpath>


        </field>
    </record>
    <!--    <record id="view_construction_project_tree" model="ir.ui.view">-->
    <!--        <field name="name">constaction.project.tree</field>-->
    <!--        <field name="model">project.project</field>-->
    <!--        <field name="priority">1000</field>-->
    <!--        <field name="arch" type="xml">-->
    <!--            <tree>-->
    <!--                <field name="name"/>-->
    <!--                <field name='partner_id'/>-->
    <!--                <field name="created_date"/>-->
    <!--                <field name="consultant"/>-->
    <!--            </tree>-->
    <!--        </field>-->
    <!--    </record>-->


    <record id="view_ternder_child" model="ir.ui.view">
        <field name="name">tender.child.foem</field>
        <field name="model">construction.tender</field>
        <field name="priority">1000</field>
        <field name="arch" type="xml">

            <form>
                <sheet>
                    <field name="lines_id">
                        <tree editable="bottom">
                            <field name="code" required="1"/>
                            <field name="item" required="1"/>
                            <field name="description" required="1"/>
                            <field name="uom_id"/>
                            <field name="qty" attrs="{'readonly':[('type','=','main')],'required':True}"/>
                            <field name="type" required="1"/>

                            <field name="notes"/>

                        </tree>
                        <form>
                            <group>
                                <group>
                                    <field name="code"/>
                                    <field name="item"/>
                                    <field name="description"/>
                                    <field name="uom_id"/>


                                </group>
                                <group>
                                    <field name="qty"/>
                                    <field name="type"/>

                                    <field name="notes"/>
                                </group>
                            </group>

                        </form>

                    </field>

                    <footer>
                        <button name="save_lines" type="object" string="Save"/>
                        or
                        <button name="cancel" string="Cancel" special="cancel" class="oe_link"/>
                    </footer>
                </sheet>


            </form>
        </field>
    </record>


</odoo>